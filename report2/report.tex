% This is "sig-alternate.tex" V1.9 April 2009
% This file should be compiled with V2.4 of "sig-alternate.cls" April 2009
%
% This has been modified for use in the Principles of Computer System Design @
% DIKU, 2010/2011
\documentclass{sig-alternate}
%
% This gets rid of the copyright box which is not needed for PCSD assignments
%
\makeatletter
\def\@copyrightspace{}
\makeatother
%
% For our purposes page numbers are not so bad
%
\pagenumbering{arabic}

%
% Useful packages
%
\usepackage{url}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
%\usepackage[british]{babel}
\usepackage{hyperref}
%\usepackage{graphicx} % uncomment if you are using graphics

\usepackage{setspace}
\usepackage{tikz}

\newcommand{\mono}[1]{{\ttfamily#1}}

\begin{document}

\title{Advanced Algorithms - Project 2}

\numberofauthors{2} % This is individual work right???

\author{
% The command \alignauthor (no curly braces needed) should
% precede each author name, affiliation/snail-mail address and
% e-mail address. Additionally, tag each line of
% affiliation/address with \affaddr, and tag the
% e-mail address with \email.
\alignauthor
SÃ¸ren Dahlgaard\\
       %\affaddr{You don't have to put an address, though you could...}\\
       \email{soerend@diku.dk}
\alignauthor
Daniel Egeberg\\
       \email{egeberg@diku.dk}
}

\maketitle

\section*{Part 1}
\subsection*{Question 1.1.a}

Given a graph $G=(V,E)$ and a number $d \in \mathbb{R}^+$, find a shortest
tour of all subsets $V'\subseteq V$ such that

\begin{equation}
    \label{eqn:tcp}
    \forall v \in V : \exists v' \in V' : \text{dist}(v,v') \leq d.
\end{equation}

The related decision problem is that given a graph $G=(V,E)$ and a number $d
\in \mathbb{R}^+$, does a tour exist of at most length $k$ such that
\autoref{eqn:tcp} is satisfied.

The corresponding language, $TCP$, is defined as follows:

\begin{align*}
    TCP = \{\langle G, d, k \rangle\} :& G = (V,E) \text{ is a complete graph,} \\
        & d \in \mathbb{R}^+, \\
        & k \in \mathbb{R} \text{ , $G$ has a TCP tour with cost at} \\
        & \qquad \text{most $k$.}
\end{align*}


\subsection*{Question 1.1.b}
To transform any hamilton cycle problem into a TCP problem do the following
steps:

\begin{itemize}
\item Transform the problem into an instance of $TSP = \{G', c, 0\}$ using
    the algorithm in CLRS, p. 1097.
\item Transform the TSP instance into an instance of TCP by setting $d = 0$.
\end{itemize}

\subsection*{Question 1.2}
See \autoref{fig:tcp}. In this case the optimal tour has length $0$ ($a$ =>
$a$), but a 1-tree obviously has much bigger length.

\tikzstyle{vertex}=[circle,fill=black!25,minimum size=20pt,inner sep=0pt]
\begin{figure}
\begin{center}
\begin{tikzpicture}
    \fill[fill=blue!10!green!10!,draw=blue,dotted,thick] (0,0) circle (2);
    \node[vertex] (a) at (0,0) {$a$};
    \node[vertex] (b) at (0,1) {$b$};
    \node[vertex] (c) at (1,0) {$c$};
    \node[vertex] (d) at (-1,0) {$d$};
    \node[vertex] (e) at (0,-1) {$e$};
\end{tikzpicture}
\end{center}
\caption{Example of a graph where the smallest 1-tree is worse than the
    optimal TCP tour}
\label{fig:tcp}
\end{figure}

\subsection*{Question 1.3}
Inspired by the ILP for the traveling salesman problem we use a decision
variable for each edge. Additionally we use a decision variable for each
vertex. Doing this we want to minimize the length of the edges in the path,
ie:

\begin{equation}
    \text{minimize } \sum_{i=0}^{n}\sum_{j=0}^{i} d_{ij}x{ij}
\end{equation}

In order to specify the constraints we introduce a notation: Let $v(S) =
\{v\in V : \exists a\in S, d_{av} \le d\}$.
Using this notation we get the following constraints:

\begin{equation}
    \label{eqn:vicinity}
    \sum_{k \in v(i)} y_k \geq 1
\end{equation}

\begin{equation}
    \label{eqn:degree}
    \sum_{j=0}^{i-1} x_{ij} + \sum_{j=i+1}^{n} x_{ji} \in \{0,2\}
    \qquad i \in \{1,2,\ldots,n\}
\end{equation}

\begin{equation}
    \label{eqn:vinpath}
    \sum_{j=0}^{i-1} x_{ij} + \sum_{j=i+1}^{n} x_{ji} - y_i \in \{0,1\}
    \qquad i \in \{1,2,\ldots,n\}
\end{equation}

\begin{equation}
    \label{eqn:subtour}
    \sum_{i,j \in S, i > j} x_{ij} - \sum_{i \in S} y_i \le 1
    \qquad S\subset V, v(S) \ne V, v(V\setminus S) \ne V
\end{equation}

\begin{equation}
    x_{ij} \in \{0,1\}
    \qquad (i,j) \in E
\end{equation}

\begin{equation}
    y_{i} \in \{0,1\}
    \qquad i \in V
\end{equation}

Where (\ref{eqn:vicinity}) makes sure that each node can be seen from the path.
(\ref{eqn:degree}) makes sure that each node has exactly $2$ or $0$ incident
edges in the path. (\ref{eqn:vinpath}) specifies that nodes with $2$ incident
edges are included in the path and other nodes aren't.

(\ref{eqn:subtour}) is a modified version of the subtour constraint. Because
we allow exactly $1$ subtour that doesn't include all vertices of the graph
we cannot use the constraint from the TSP formulation. Instead we look at
all partitions of the graph $(S, V\setminus S)$ such that neither set has
vision of all monuments ($v(S)\ne V, v(V\setminus S0\ne V$). For all of these
partitions we must have an edge crossing the cut. We can formulate this, as
the amount of edges in $S$ must be less that the amount of nodes (included in
the path).

\subsection*{Question 1.4}
The biggest problem with the ILP formulation is that the amount of constraints
is exponential in the input size. Removing \autoref{eqn:subtour} gives a lower
bound for the TCP with a polynomial amount of constraints..

\section*{Part 2}
\subsection*{Question 2.1}

We've alreadydecided to remove \autoref{eqn:subtour} to get a problem of
polynomial size. This leaves all the variables $y_i$ useless, so we can
remove \autoref{eqn:vinpath} as well and the $y_i$ variables in general.

This leaves us with a nice set of constraints, however the integer constraints
make it a much harder problem. We therefore relax all constraints
$k\in \{a, b\}$ and replace them with $a\le k \le b$.

\subsection*{Question 2.2}
We implemented this in C++ rather than using the supplied Java code. Our
definition of when a node is ``evaluated'' might therefore be different. We say
that a node is evaluated when it is removed from the priority queue that makes
up the best-first search.
\\\\
\begin{tabular}{| l | l | l | r |}
\hline
\textbf{Graph} & \textbf{\# eval} & \textbf{Tour} & \textbf{Length} \\
\hline
1              & 44              & 6, 8, 7, 5, 6 & $5.013630$      \\
2              & 4               & 2, 3, 5, 4, 2 & $4.000000$      \\
3              & 9               & 0, 1, 3, 5, 7, 6, 4, 2, 0 & $8.000000$ \\
\hline
\end{tabular}

% That's all folks!
\end{document}
