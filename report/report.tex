% This is "sig-alternate.tex" V1.9 April 2009
% This file should be compiled with V2.4 of "sig-alternate.cls" April 2009
%
% This has been modified for use in the Principles of Computer System Design @
% DIKU, 2010/2011
\documentclass{sig-alternate}
%
% This gets rid of the copyright box which is not needed for PCSD assignments
%
\makeatletter
\def\@copyrightspace{}
\makeatother
%
% For our purposes page numbers are not so bad
%
\pagenumbering{arabic}

%
% Useful packages
%
\usepackage{url}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
%\usepackage[british]{babel}
\usepackage{hyperref}
%\usepackage{graphicx} % uncomment if you are using graphics

\usepackage{setspace}

\newcommand{\mono}[1]{{\ttfamily#1}}

\begin{document}

\title{Advanced Algorithms - Project 1}

\numberofauthors{2} % This is individual work right???

\author{
% The command \alignauthor (no curly braces needed) should
% precede each author name, affiliation/snail-mail address and
% e-mail address. Additionally, tag each line of
% affiliation/address with \affaddr, and tag the
% e-mail address with \email.
\alignauthor
SÃ¸ren Dahlgaard\\
       %\affaddr{You don't have to put an address, though you could...}\\
       \email{soerend@diku.dk}
\alignauthor
Daniel Egeberg\\
       \email{egeberg@diku.dk}
}

\maketitle

\begin{abstract}
\end{abstract}

\section{Part 1}
We assume that the vertex capacities are not used in part~1, as they are only
introduced in part~2.

\subsection*{Question 1.1}

$G$ is not a flow network because it is an undirected graph, or more
specifically because for all edges $(u,v)$ there exists an edge $(v,u)$. The
graph also has multiple sources and sinks, which is not allowed either.

\subsection*{Question 1.2}

Fixing the problem with $G$ being undirected can be fixed by introducing a
new vertex $v'$ for each edge $(u,v)$ and new edges $(v,v')$ and $(v',u)$
such that $c(v, v') = c(v', u) = c(u, v)$. Then the graph must now be
considered directed.

The problem with multiple sources can be fixed by introducing a new
super-source $s$ and new edges $(s, v)$ with $c(s, v)=\infty$ for all $v \in
S$.

Similarly, we introduce a new super-sink $t$ and edges $(v, t)$ with
$c(v,t)=\infty$ for all $t \in T$.


\subsection*{Question 1.3}

The maximum number of cars that can enter the city per minute is 240 as seen
by running \verb+part1.py+.

\subsection*{Question 1.4}

Intuitively, one would imagine that increasing the value of any edge in the
minimum cut would increase the flow value. This is, however, not true. For
instance, increasing the value of $(22, 27)$ does not affect the maximum flow
value. The edges that give an immediate effect are $(21, 26)$, $(7, 28)$,
$(20, 27)$, $(23, 29)$ and $(24, 29)$.

\section{Part 2}
\subsection*{Question 2.1}
For each vertex $v$, split it into two vertices $v_{\text{in}}$ and
$v_{\text{out}}$. Replace each edge $(u, v)$ with $(u, v_{\text{in}})$
and each edge $(v, u)$ with $(v_{\text{out}}, u)$. Introduce a new edge
$(v_{\text{in}}, v_{\text{out}})$ with capacity equal to the capacity of
the intersection.

Additionally, we set all the $s_{\text{out}}$ as the new sources. Similarly
for the sinks.

\subsection*{Question 2.2}
Introduce new constraints that the sum of in-edges must be less than or equal
to the vertex capacities. Note that this also includes the original sources and
sinks, as we have introduces super-source and super-sink.

\subsection*{Question 2.3}
Changing the graph will mean that normal max-flow algorithms apply.

Changing the LP problem is easy and a good LP library will do most of the
work for you.

\subsection*{Question 2.4}

Introducing these new constraints lowers the maximum flow to 210 as seen by
running \verb+part2.py+.

\section{Part 3}

\subsection*{Question 3.1}


Keeping the same definition of capacity contraint, flow conservation and
flow value, we introduce a new constraint: \textit{vertex capacity constraint}:

\[
\sum_{v\in V} f(u, v) \le c(u) \ge \sum_{v\in V} f(v, u)
\] where $c(v)$ is the vertex capacity of $v$. This has to hold for all $u\in V$.

\subsection*{Question 3.2}

We define the flow $f' : V \times V \to \mathbb{R}$ as:
\begin{align}
    \label{eq1} f'(u_{\text{out}}, v_{\text{in}}) &= f(u,v) \\
    \label{eq2} f'(v_{\text{in}}, v_{\text{out}}) &= \sum_{u\in V} f(u, v) \\
    \label{eq3} f'(u,v) &= 0 \qquad\qquad\text{otherwise.}
\end{align}

\subsection*{Question 3.3}

\begin{align}
    \label{eq4} \sum_{v\in V} f(v,u) &= \sum_{v_{\text{out}} \in V'} f(v_{\text{out}}, u_{\text{in}}) \\
    \label{eq5} &= \sum_{v \in V'} f'(v, u_{\text{in}}) \\
    \label{eq6} &= \sum_{v \in V'} f'(u_{\text{in}}, u_{\text{out}}) \\
    \label{eq7} &= \sum_{v \in V'} f'(u_{\text{in}}, v)
\end{align}

\autoref{eq4} follows from the definition in \autoref{eq1}. \autoref{eq5}
follows from \autoref{eq3}. \autoref{eq6} follows from \autoref{eq2}.
\autoref{eq7} follows from \autoref{eq3}.

\begin{equation}
    \label{eq8} f(u,v) \leq c(u,v) \Rightarrow f'(u_{\text{out}}, v_{\text{in}}) \leq c'(v_{\text{out}}, v_{\text{in}})
\end{equation}

\autoref{eq8} follows from \autoref{eq1} and the definition of capacity in $G'$.

\begin{align}
    \label{eq9} f'(v_{\text{in}}, v_{\text{out}}) &= \sum_{u\in V} f(u, v) \\
    \label{eq10}    &\leq c(v) \\
    \label{eq11}    &= c'(v_{\text{in}}, v_{\text{out}})
\end{align}

\autoref{eq9} follows from \autoref{eq2}. \autoref{eq10} follows from the new
vertex capacity constraint. \autoref{eq11} follows from the definition of
capacity in $G'$.

\subsection*{Question 3.4}

\begin{equation}
    |f| = \sum_{v \in V} f(s,v) - \sum_{v \in V} f(v,s)
\end{equation}

\begin{equation}
    |f'| = \sum_{v \in V'} f'(s_{\text{out}},v) - \sum_{v \in V'} f'(v,s_{\text{out}})
\end{equation}

\begin{align}
    \label{eq14} \sum_{v \in V} f(s, v) &= \sum_{v_{\text{in}} \in V'} f'(s_{\text{out}}, v_{\text{in}}) \\
    \label{eq15}    &= \sum_{v \in V'} f'(s_{\text{out}}, v)
\end{align}

\autoref{eq14} follows from \autoref{eq1}. \autoref{eq15} follows from \autoref{eq3}.

\begin{align}
    \label{eq16} \sum_{v \in V} f(v, s) &= \sum_{v_{\text{out}} \in V'} f'(v_{\text{out}}, s_{\text{in}}) \\
    \label{eq17}    &= f'(s_{\text{in}}, s_{\text{out}}) \\
    \label{eq18}    &= \sum_{v \in V'} f'(v, s_{\text{out}})
\end{align}

\autoref{eq16} follows from \autoref{eq1}. \autoref{eq17} follows from flow
conservation. \autoref{eq18} follows from \autoref{eq3}.


% That's all folks!
\end{document}
